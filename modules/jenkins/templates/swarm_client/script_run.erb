#!/usr/bin/env bash
#
# This starts the swarm client.

CLIENT_PATH="<%= @client_path %>"
FSROOT="<%= @swarm_dir %>"
HOSTNAME="<%= @hostname %>"
MASTER="<%= @master_address %>"
USER="<%= @user %>"

<% if @sudo_run -%>
/usr/bin/sudo \
  -u ${USER} \
  -i \
<% end -%>
  java \
  -jar ${CLIENT_PATH} \
  -name ${HOSTNAME} \
  -fsroot ${FSROOT} \
<% if @labels -%>
  -labels '<%= @labels %>' \
<% end -%>
<% if @master_user -%>
  -username <%= @master_user %> \
  -password <%= @master_pass %> \
<% end -%>
  -master ${MASTER}
